module Applib.Intent.Swap.Solution;

import Stdlib.Prelude open;
import Stdlib.Data.Set as Set open using {Set};
import Anoma.Identity open;
import Anoma.Transaction open;

import Applib.Transaction.Traits open;
import Applib.Token.Transaction open;
import Applib.Token.Resource open;
import Applib.Intent.Swap.Resource open;

import Applib.Helpers open;

module Solution;
  -- TODO generalize
  type Solution :=
    mk@{
      intent : SwapIntent;
      created : Set Token
    };

  toAction (standardInputs : StandardInputs) (solution : Solution) : Action :=
    let
      consumed := Set.singleton (Solution.intent solution);
      created := Solution.created solution;
    in ActionConvertable.toAction standardInputs consumed created;

  open Solution public;
end;

open Solution using {Solution} public;
