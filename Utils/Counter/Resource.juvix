module Utils.Counter.Resource;

import Stdlib.Prelude open;
import Anoma open;

import Utils.Counter.Logic open;
import Utils.Counter.Label open;

mkCounter
  (nullifierPubKey : PublicKey)
  (ephemeral : Bool)
  (uniqueLabel : Label)
  (count : Nat)
  : Resource :=
  Resource.mk@{
    logic := counterLogic;
    label := anomaEncode (uniqueLabel);
    quantity := 1;
    data := count;
    eph := ephemeral;
    npk := anomaEncode (nullifierPubKey);
    nonce := 0;
    rseed := 0
  };
